# 9. 바운디드 컨텍스트와 도메인 관계

## 9.1 도메인 모델과 경계

- **바운디드 컨텍스트(Bounded Context)**: 도메인 내에서 용어나 개념이 일관된 의미를 가지도록 명확하게 구분한 경계이다.
- 하나의 도메인은 여러 개의 바운디드 컨텍스트로 나뉠 수 있으며, 바운디드 컨텍스트마다 모델이 다를 수 있다.
- 바운디드 컨텍스트는 도메인의 경계를 정의하며, 이 경계 내에서 개념과 용어는 명확하고 일관성 있게 사용되어야 한다.

---

## 9.2 바운디드 컨텍스트

- 바운디드 컨텍스트는 하위 도메인(Subdomain)과 일대일 관계를 가질 수도 있고, 아닐 수도 있다.
- 여러 하위 도메인을 하나의 바운디드 컨텍스트에서 개발할 때는 각 하위 도메인이 섞이지 않도록 주의해야 한다.
- 도메인의 복잡도와 규모에 따라 바운디드 컨텍스트의 범위를 유연하게 조정할 수 있다.

---

## 9.3 바운디드 컨텍스트 구현

- 바운디드 컨텍스트는 단순히 도메인 모델만 포함하는 것이 아니라, 표현(UI), 응용(Application), 인프라스트럭처 영역까지 포함할 수 있다.
- 도메인 로직이 단순한 경우에는 CRUD 방식으로 구현해도 된다.
- 복잡한 비즈니스 로직이 필요한 경우에는 도메인 모델 패턴을 활용해 구현한다.
- 한 바운디드 컨텍스트 내에서 도메인 모델 방식과 CRUD 방식을 혼합해서 사용하는 것도 가능하다.

---

## 9.4 바운디드 컨텍스트 간 통합

- 바운디드 컨텍스트 간에는 다음과 같은 방법으로 통합할 수 있다:
  - **REST API**를 통한 통신
  - **메시지 큐**(예: Kafka, RabbitMQ)를 통한 이벤트 기반 통신
- 메시지 큐 방식에서는 이벤트를 발행하는 쪽의 도메인 모델을 따르게 되므로, 이벤트 설계 시 신중함이 필요하다.
- 통합 시 각 바운디드 컨텍스트는 가능한 한 독립적으로 동작할 수 있어야 하며, 변화에 민감하지 않도록 느슨한 결합을 유지해야 한다.

---

## 9.5 바운디드 컨텍스트 간 관계

- 가장 일반적인 관계는 REST API를 통해 한 컨텍스트가 다른 컨텍스트의 기능을 사용하는 경우이다.
  - 이 경우 API를 제공하는 쪽의 인터페이스가 변경되면 사용하는 쪽도 반드시 변경되어야 한다.
- 바운디드 컨텍스트 간의 관계 유형은 다음과 같다:
  - **오픈 호스트 서비스(Open Host Service)**: 상류 컴포넌트가 프로토콜(REST, gRPC 등)을 통해 명확한 계약을 가진 API를 제공.
  - **안티코럽션 계층(Anti-Corruption Layer, ACL)**: 외부 시스템의 도메인 모델이 내부 도메인 모델을 침범하지 않도록 보호하는 계층.
  - **공유 커널(Shared Kernel)**: 두 컨텍스트가 일부 도메인 모델이나 컴포넌트를 공유.
  - **독립 방식(Separate Ways)**: 두 컨텍스트를 통합하지 않고 독립적으로 운영. 시스템이 커지면 통합 계층을 따로 구성할 수도 있음.

---

## 9.6 컨텍스트 맵

- 컨텍스트 맵(Context Map)은 시스템 내의 여러 바운디드 컨텍스트 간의 관계를 시각적으로 표현한 것이다.
- 각 컨텍스트 간의 통합 방식(Open Host Service, ACL 등), 의존 관계, 팀 책임 등을 명확하게 보여준다.
- 개발 초기 단계에서 컨텍스트 맵을 작성해두면 전체 시스템 아키텍처를 이해하는 데 도움이 되며, 유지보수와 확장성 측면에서도 효과적이다.
